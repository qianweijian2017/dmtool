webpackJsonp([2],{"/vsh":function(e,t){},V1zV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),o=n("mvHQ"),i=n.n(o),s=n("exGp"),u=n.n(s),c={name:"",data:function(){return{isShowFormking:!1,detail:{},jsonData:{},isLoading:!0}},mounted:function(){var e=this;this.$nextTick(function(){e.$route.query.id&&e.handleFormReady()})},methods:{handleSave:function(){var e=this;return u()(a.a.mark(function t(){var n,r,o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(n=e.$refs.makingform.getJSON()).list.length){t.next=3;break}return t.abrupt("return",e.$message.error("请先设计表单"));case 3:return t.next=5,e.$prompt("请输入表单名称：","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e.detail.formname}).catch(function(e){return 0});case 5:if((r=t.sent)&&"confirm"==r.action){t.next=8;break}return t.abrupt("return");case 8:if(r.value){t.next=10;break}return t.abrupt("return",e.$message.error("输入表单名称"));case 10:return o=i()(n),t.next=13,e.$http.post("/form/saveForm",{type:1,formdata:encodeURIComponent(o),formname:r.value,id:e.$route.query.id});case 13:(s=t.sent)&&1===s.code&&(e.$message.success("保存成功！"),e.$router.push({path:"/"}));case 15:case"end":return t.stop()}},t,e)}))()},handleFormReady:function(){var e=this;console.log(this.$route.query.id),this.$route.query.id&&this.$http.post("/form/getFormDetail",{id:this.$route.query.id}).then(function(t){if(t&&t.data){e.detail=t.data;var n=decodeURIComponent(e.detail.formdata);e.jsonData=JSON.parse(n),e.$refs.makingform.setJSON(e.jsonData)}}).catch(function(t){return e.isLoading=!1})}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("fm-making-form",{ref:"makingform",staticStyle:{height:"90vh"},attrs:{preview:"","generate-code":""}},[t("template",{slot:"action"},[t("el-button",{attrs:{type:"text",icon:"el-icon-upload"},on:{click:this.handleSave}},[this._v("保存")])],1)],2)],1)},staticRenderFns:[]};var d=n("VU/8")(c,f,!1,function(e){n("/vsh")},"data-v-4d5b17ff",null);t.default=d.exports},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(e,t,n){var r=n("FeBl"),a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}}});
//# sourceMappingURL=2.47a30b1ed3ed01949ef8.js.map