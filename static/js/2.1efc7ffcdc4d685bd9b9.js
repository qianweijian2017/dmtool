webpackJsonp([2],{V1zV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),o=n("mvHQ"),i=n.n(o),s=n("exGp"),u=n.n(s),c={name:"",data:function(){return{isShowFormking:!1,detail:{},jsonData:{},isLoading:!0}},mounted:function(){var t=this;this.$nextTick(function(){t.$route.query.id&&t.handleFormReady()})},methods:{handleSave:function(){var t=this;return u()(a.a.mark(function e(){var n,r,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(n=t.$refs.makingform.getJSON()).list.length){e.next=3;break}return e.abrupt("return",t.$message.error("请先设计表单"));case 3:return e.next=5,t.$prompt("请输入表单名称：","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.detail.formname}).catch(function(t){return 0});case 5:if((r=e.sent)&&"confirm"==r.action){e.next=8;break}return e.abrupt("return");case 8:if(r.value){e.next=10;break}return e.abrupt("return",t.$message.error("输入表单名称"));case 10:return o=i()(n),e.next=13,t.$http.post("/form/saveForm",{type:1,formdata:encodeURIComponent(o),formname:r.value,id:t.$route.query.id});case 13:(s=e.sent)&&1===s.code&&(t.$message.success("保存成功！"),location.href="/");case 15:case"end":return e.stop()}},e,t)}))()},handleFormReady:function(){var t=this;console.log(this.$route.query.id),this.$route.query.id&&this.$http.post("/form/getFormDetail",{id:this.$route.query.id}).then(function(e){if(e&&e.data){t.detail=e.data;var n=decodeURIComponent(t.detail.formdata);t.jsonData=JSON.parse(n),t.$refs.makingform.setJSON(t.jsonData)}}).catch(function(e){return t.isLoading=!1})}}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("fm-making-form",{ref:"makingform",staticStyle:{height:"90vh"},attrs:{preview:""}},[e("template",{slot:"action"},[e("el-button",{attrs:{type:"text",icon:"el-icon-upload"},on:{click:this.handleSave}},[this._v("保存")])],1)],2)],1)},staticRenderFns:[]};var d=n("VU/8")(c,f,!1,function(t){n("t839")},"data-v-10250f94",null);e.default=d.exports},mvHQ:function(t,e,n){t.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(t,e,n){var r=n("FeBl"),a=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},t839:function(t,e){}});
//# sourceMappingURL=2.1efc7ffcdc4d685bd9b9.js.map